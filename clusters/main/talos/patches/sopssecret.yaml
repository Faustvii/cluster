- op: add
  path: /cluster/inlineManifests
  value:
    - name: flux-system
      contents: |-
        apiVersion: v1
        kind: Namespace
        metadata:
          name: flux-system
    - name: sops-age
      contents: |-
        apiVersion: v1
        stringData:
          age.agekey: AGE-SECRET-KEY-1NYJM4LUY3ECNEQU5626X6T5W3YTMURCTHFNJRUC57FRSEHD402QSJW76YK
        kind: Secret
        metadata:
          creationTimestamp: null
          name: sops-age
          namespace: flux-system
    - name: cluster-config
      contents: |-
        apiVersion: v1
        kind: ConfigMap
        metadata:
          creationTimestamp: null
          name: cluster-config
          namespace: flux-system
        data:
          ## The Following are required by ClusterTool and CANNOT be removed
          # Ensure VIP is different from all master IPs
          VIP: 192.168.1.60
          # Defines the MasterNode IP
          MASTER1IP: 192.168.1.50
          # Defines the gateway for all nodes
          GATEWAY: 192.168.1.1
          # Defines the ip range metallb is allowed to use
          METALLB_RANGE: 192.168.1.61-192.168.1.69
          # Sets the Kubernetes Dashboard IP. Has to be within METALLB_RANGE and not in use
          DASHBOARD_IP: 192.168.1.61
          # Sets the KubeApps IP. Has to be within METALLB_RANGE and not in use
          KUBEAPPS_IP: 192.168.1.62
          # Used to automatically generate a sshkey-pair for FluxCD
          # Has to start with ssh://
          GITHUB_REPOSITORY: ssh://git@github.com/Faustvii/cluster.git
          # DO NOT ALTER
          PODNET: 172.16.0.0/16
          SVCNET: 172.17.0.0/16
          #
          TRAEFIK_IP: 192.168.1.69
          BASE_DOMAIN: faust.local
          # Plex
          PLEX_IP: 192.168.1.63
          PLEX_ADVERTISE_URL: http://plex.faust.local:32400,https://plex.faust.local
          # NFS Shares
          NFS_SERVER_IP: 192.168.1.94
          NFS_PATH_DOWNLOADS: /mnt/data/downloads
          NFS_PATH_MEDIA: /mnt/media/Media
          NFS_PATH_MEDIA_SERIES: /mnt/media/Media/PlexMedia/Series
          NFS_PATH_MEDIA_MOVIES: /mnt/media/Media/PlexMedia/Movies
          NFS_PATH_MEDIA_ANIME: /mnt/media/Media/PlexMedia/Anime
          NFS_PATH_MEDIA_BOOKS: /mnt/media/Media/Books
          
    - name: deploy-key
      contents: |-
        apiVersion: v1
        kind: ConfigMap
        metadata:
          creationTimestamp: null
          name: deploy-key
          namespace: flux-system
        stringData:
        identity: |
          -----BEGIN EC PRIVATE KEY-----
          MIGkAgEBBDAaRGiJYPeSvCdM6gJyq3DGNPn73imGX7M45yGNJV/k/xezvaKygTfB
          hHfCzeIp1J6gBwYFK4EEACKhZANiAASTUCOXipSJMEZuC0beRWKLaEl8jjdLNcw6
          zyQxc4w2GdOjMHEIuCVpmODChsdHyoaUrsyNIJ35CXrNOoYUfqUPVUAi4Uyk6wyn
          BkJMP3MZqICkovj7NEbKlvnM6mn8Zus=
          -----END EC PRIVATE KEY-----
        identity.pub: |
          ecdsa-sha2-nistp384 AAAAE2VjZHNhLXNoYTItbmlzdHAzODQAAAAIbmlzdHAzODQAAABhBJNQI5eKlIkwRm4LRt5FYotoSXyON0s1zDrPJDFzjDYZ06MwcQi4JWmY4MKGx0fKhpSuzI0gnfkJes06hhR+pQ9VQCLhTKTrDKcGQkw/cxmogKSi+Ps0RsqW+czqafxm6w==
        known_hosts: github.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBEmKSENjQEezOmxkZMy7opKgwFB9nkt5YRrYMjNuG5N87uRgg6CLrbo5wAdT/y6v0mKV0U2w0WZ2YB/++Tpockg=

            